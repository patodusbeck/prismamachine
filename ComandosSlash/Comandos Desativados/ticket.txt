const Discord = require("discord.js");

module.exports = {
  name: "painel-ticket", 
  description: '[üëë ADM] Envie o painel de tikcet.',
  type: Discord.ApplicationCommandType.ChatInput,
  options: [
    {
        name: "chat",
        description: "Mencione um canal.",
        type: Discord.ApplicationCommandOptionType.Channel,
        required: true,
    },
],
  
    run: async(client, interaction) => {

        if (!interaction.member.permissions.has(Discord.PermissionFlagsBits.Administrator))
        return interaction.reply({
            content: `**‚ùå - ${interaction.user}, Voc√™ precisa da permiss√£o \`Administrador\` para usar este comando!**`,
            ephemeral: true,
      }); else {

        let chat = interaction.options.getChannel("chat")

        if (!chat.send)
        return interaction.reply({
            content: `**‚ùå - ${interaction.user}, Voc√™ provavelmente selecionou um canal de voz ou categoria. Por favor selecione um canal de texto.**`,
            ephemeral: true,
        })

        let rowTicket = new Discord.ActionRowBuilder()
        .addComponents(
            new Discord.StringSelectMenuBuilder()
                .setCustomId('select2')
                .setPlaceholder('üé´ - selecionar Op√ß√£o!')
                .addOptions(
                    {
                        label: ' - Ticket',
                        description: 'Clique aqui para abrir o Ticket (Den√∫ncias e Suporte Geral).',
                        emoji: 'üî®',
                        value: 'ticket',
                    },
                    {
                        label: ' - Tenho D√∫vidas',
                        description: 'Clique aqui caso haja alguma d√∫vida.',
                        emoji: '‚ùî',
                        value: 'duvida',
                    },
                    
                ),
                
           )

          
        let embedTicket = new Discord.EmbedBuilder()
         .setTitle(`üíæ - Ticket`)
         .setDescription(`*Selecione uma op√ß√£o de suporte abaixo!*`)
         .setColor('Red')
         .setAuthor({ name: `${interaction.user.username}`, iconURL: `${(interaction.user.displayAvatarURL({ dinamyc: true, format: "png" }))}`})
         .setFooter({ text: `Sistema feito por: „ÉÑ | Ornitonrrinco`, iconURL: `${client.user.displayAvatarURL()}`})
         .setThumbnail(`${interaction.guild.iconURL()}`)
         .setImage(`${interaction.guild.iconURL({ size: 2048})}`)
         

         interaction.reply({ content: `‚úÖ - Feito! Ticket enviado no canal ${chat}!`, ephemeral: true})
         chat.send({ components: [rowTicket], embeds: [embedTicket] })
              
    

      } 

  }
}