const Discord = require('discord.js');

// Função para calcular a soma
function calculateSum(time1, time2) {
  // Separa as horas e minutos do primeiro número
  const [hours1, minutes1] = time1.split(':').map(Number);
  // Separa as horas e minutos do segundo número
  const [hours2, minutes2] = time2.split(':').map(Number);

  // Calcula a soma das horas e minutos
  const totalHours = hours1 + hours2;
  const totalMinutes = minutes1 + minutes2;

  // Realiza o ajuste caso os minutos ultrapassem 60
  let adjustedHours = totalHours;
  let adjustedMinutes = totalMinutes;

  if (adjustedMinutes >= 60) {
    adjustedHours += Math.floor(adjustedMinutes / 60);
    adjustedMinutes %= 60;
  }

  // Formata o resultado de volta para o formato "00:00"
  const formattedHours = String(adjustedHours).padStart(2, '0');
  const formattedMinutes = String(adjustedMinutes).padStart(2, '0');

  return `${formattedHours}:${formattedMinutes}`;
}

module.exports = {
  name: "somarhora",
  description: "Some duas horas no formato(00:00)",
  type: Discord.ApplicationCommandType.ChatInput,
  options: [
    {
      name: "num1",
      description: "Digite o primeiro número no formato HH:MM",
      type: Discord.ApplicationCommandOptionType.String,
      required: true,
    },
    {
      name: "num2",
      description: "Digite o segundo número no formato HH:MM",
      type: Discord.ApplicationCommandOptionType.String,
      required: true,
    },
  ],
  run: async (client, interaction) => {
    const num1 = interaction.options.getString("num1");
    const num2 = interaction.options.getString("num2");

    const sum = calculateSum(num1, num2);

    await interaction.reply(`A soma de ${num1} e ${num2} é igual a ${sum}.`);
  },
};
